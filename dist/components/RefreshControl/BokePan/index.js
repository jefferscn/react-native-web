Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var BokePan=function(_Component){_inherits(BokePan,_Component);function BokePan(props){_classCallCheck(this,BokePan);var _this=_possibleConstructorReturn(this,(BokePan.__proto__||Object.getPrototypeOf(BokePan)).call(this,props));_this.preV={x:null,y:null};_this.multiTouch=false;_this.panning=false;_this.handleTouchStart=_this.handleTouchStart.bind(_this);_this.handleTouchMove=_this.handleTouchMove.bind(_this);_this.handleTouchCancel=_this.handleTouchCancel.bind(_this);_this.handleTouchEnd=_this.handleTouchEnd.bind(_this);_this.emitEvent=_this.emitEvent.bind(_this);return _this;}_createClass(BokePan,[{key:'panDirection',value:function panDirection(x1,x2,y1,y2){return y1-y2>0?'Up':'Down';}},{key:'handleTouchStart',value:function handleTouchStart(event){if(!event.touches){return;}this.now=Date.now();this.x1=event.touches[0].pageX;this.y1=event.touches[0].pageY;}},{key:'handleTouchMove',value:function handleTouchMove(event){var _this2=this;var _event$touches$=event.touches[0],pageX=_event$touches$.pageX,pageY=_event$touches$.pageY;this.x2=pageX;this.y2=pageY;this.end=Date.now();event.origin=[this.x1,this.y1];if(this.multiTouch===false&&(this.x2&&Math.abs(this.x1-this.x2)>10||this.y2&&Math.abs(this.preV.y-this.y2)>10)){if(this.panning===false){this.panning=true;this.panStartTimeout=setTimeout(function(){_this2.emitEvent('onPanStart',event);},0);}event.direction=this.panDirection(this.x1,this.x2,this.y1,this.y2);event.distance=Math.abs(this.y1-this.y2);event.current=[pageX,pageY];this.panTimeout=setTimeout(function(){_this2.emitEvent('onPan'+event.direction,event);},0);}}},{key:'handleTouchCancel',value:function handleTouchCancel(){clearTimeout(this.panStartTimeout);clearTimeout(this.panEndTimeout);clearTimeout(this.panTimeout);}},{key:'handleTouchEnd',value:function handleTouchEnd(event){var _this3=this;event.distance=Math.abs(this.y1-this.y2);if(this.panning===true){this.panEndTimeout=setTimeout(function(){_this3.emitEvent('onPanEnd',event);},0);}this.preV.x=0;this.preV.y=0;this.scale=1;this.x1=this.x2=this.y1=this.y2=null;this.multiTouch=false;this.panning=false;}},{key:'emitEvent',value:function emitEvent(name){if(this.props[name]){var _props;for(var _len=arguments.length,arg=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){arg[_key-1]=arguments[_key];}(_props=this.props)[name].apply(_props,arg);}}},{key:'render',value:function render(){return _react2.default.cloneElement(_react2.default.Children.only(this.props.children),{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchCancel:this.handleTouchCancel,onTouchEnd:this.handleTouchEnd});}}]);return BokePan;}(_react.Component);exports.default=BokePan;